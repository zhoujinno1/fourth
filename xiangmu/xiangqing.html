<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>详情页</title>
    <link rel="stylesheet" type="text/css" href="./css/publice.css" />
    <link rel="stylesheet" type="text/css" href="./css/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="./css/xiangqing.css" />
</head>

<body>
    <!-- 导航 -->
    <div id="nav">
        <div class="nav_BX">
            <div class="nav_BXleft">
                <ul>
                    <li>
                        <a href="index.html">首页</a>
                        <span>|</span>
                    </li>
                    <li><a href="#">华为官网</a><span>|</span></li>
                    <li><a href="#">荣耀</a><span>|</span></li>
                    <li><a href="#">花粉俱乐部</a><span>|</span></li>
                    <li><a href="#">V码(优购码)</a><span>|</span></li>
                    <li><a href="#">企业购</a><span>|</span></li>
                    <li><a href="#">Select Region</a></li>
                </ul>
            </div>
            <div class="nav_BXright">
                <ul>
                    <li><a href="login.html" class="dl">请登陆</a>&nbsp;&nbsp;<a href="resiter.html">注册</a><span>|</span></li>
                    <li><a href="#">我的订单</a><span>|</span></li>
                    <li>
                        <a href="#">客户服务<i class="iconfont icon-xiajiantou"></i></a><span>|</span>
                        <div class="kf">
                            <p>帮助中心</p>
                            <p>联系客服</p>
                        </div>
                    </li>
                    <li>
                        <a href="#">网站导航<i class="iconfont icon-xiajiantou"></i></a><span>|</span>
                        <div class="wz">
                            <a href="#">商城首页</a>
                        </div>
                    </li>
                    <li>
                        <a href="#">手机版<i class="iconfont icon-xiajiantou"></i></a>
                        <div class="ewm">
                            <div class="ewm_top">
                                <div class="ewm_topleft">
                                    <img src="./images/02.jpg" />
                                </div>
                                <div>

                                </div>
                            </div>
                            <div class="ewn_centent">
                                <div class="ewn_cententleft">
                                    <img src="images/03.jpg" />
                                </div>
                                <div>

                                </div>
                            </div>
                            <div class="ewm_bottom">
                                <div class="ewm_bottomleft">
                                    <img src="./images/03.jpg" />
                                </div>
                                <div>

                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a href="shpping.html"><i class="iconfont icon-gouwuche"></i>购物车<span class="shulang">(0)</span></a>
                        <div class="gwc">
                            <div class="dgwc"></div>
                            <p>你的购物车空的,感觉选购吧</p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- logo区 -->
    <div id="logo">
        <div class="logo_BX">
            <div class="logo_BXleft">
                <img src="./images/04.png" />
                <img src="./images/05.png" />
            </div>
            <ul class="logo_BXcentent">
                <li><a href="#">手机</a></li>
                <li><a href="#">笔记本电脑</a></li>
                <li><a href="#">平板&穿戴</a></li>
                <li><a href="#">智能家居</a></li>
                <li><a href="#">配件</a></li>
                <li><a href="#">企业购</a></li>
            </ul>
            <div class="log_BXcententhove">

            </div>
            <div class="logo_BXright">
                <input type="text" value="">
                <a href="#"><i class="iconfont icon-faj pox"></i></a>
                <!--  <div class="logo_BXrightbox"> -->
                <a href="#" class="box1">HUAWEI Mate 30</a>
                <a href="#" class="box2">HUAWEI P30</a>
                <!-- </div> -->

            </div>
        </div>
    </div>
    <!-- 主体内容 -->
    <div id="centen_n">
        <div class="cent_nBX">
            <div class="cent_nBXtop">
                <div class="cent_nBXtopnav">
                    <a href="#">首页</a>
                    &nbsp;>&nbsp;
                    <span>手机</span>
                </div>
            </div>
            <div class="cent_nBXbottom">
                <ul class="cent_nBXbottom1">
 <!--                    <li>
                        <div class="pro_panelse">
                            <a href="#">
                                <p class="p_img">
                                    <img src="https://res.vmallres.com/pimages//product/6901443281213/428_428_1546486249080mp.png"/>
                                </p>
                                <p title="HUAWEI Mate 20 Pro" class="p_name">
                                    HUAWEI Mate 20 Pro
                                </p>
                                <p class="p_price">
                                    <b>¥4499</b>
                                    <span>多款可选</span>
                                </p>
                                <p class="p_label">
                                    <span>购机赠券</span>
                                </p>
                                <p class="p_comment">
                                    <em>
                                        <span>210500</span>人评价
                                    </em>
                                    <em>
                                        <span>99</span>%好评
                                    </em>
                                </p>
                                <p class="j">加入购物车</p>
                            </a>
                        </div>
                    </li>
                   
                    <li>
                        <div class="pro_panelse">
                            <a href="#">
                                <p class="p_img">
                                    <img src="https://res.vmallres.com/pimages//product/6901443260232/428_428_1539230426520mp.png"/>
                                </p>
                                <p title="HUAWEI Mate 20" class="p_name">
                                    HUAWEI Mate 20
                                </p>
                                <p class="p_price">
                                    <b>¥3199</b>
                                    <span>多款可选</span>
                                </p>
                                <p class="p_label">
                                    <span>购机赠券</span>
                                </p>
                                <p class="p_comment">
                                    <em>
                                        <span>66481</span>人评价
                                    </em>
                                    <em>
                                        <span>99</span>%好评
                                    </em>
                                </p>
                                <p class="j">加入购物车</p>
                            </a>
                        </div>
                    </li>

                    <li>
                        <div class="pro_panelse">
                            <a href="#">
                                <p class="p_img">
                                    <img src="https://res.vmallres.com/pimages//product/6901443316502/428_428_1563763050029mp.png"/>
                                </p>
                                <p title="HUAWEI nova 5i Pro" class="p_name">
                                    HUAWEI nova 5i Pro
                                </p>
                                <p class="p_price">
                                    <b>¥1599</b>
                                    <span>多款可选</span>
                                </p>
                                <p class="p_label">
                                    <span>购机赠券</span>
                                </p>
                                <p class="p_comment">
                                    <em>
                                        <span>10398</span>人评价
                                    </em>
                                    <em>
                                        <span>99</span>%好评
                                    </em>
                                </p>
                                <p class="j">加入购物车</p>
                            </a>
                        </div>
                    </li>

                    <li>
                        <div class="pro_panelse">
                            <a href="#">
                                <p class="p_img">
                                    <img src="https://res.vmallres.com/pimages//product/6901443327690/428_428_50BAC6E20ED77CBBE6D44BD831603E6F0FB45173DB1EE8B2mp.png"/>
                                </p>
                                <p title="华为畅享 10Plus" class="p_name">
                                    华为畅享 10Plus
                                </p>
                                <p class="p_price">
                                    <b>¥1399</b>
                                    <span>多款可选</span>
                                </p>
                                <p class="p_label">
                                    <span>购机赠券</span>
                                </p>
                                <p class="p_comment">
                                    <em>
                                        <span>10084</span>人评价
                                    </em>
                                    <em>
                                        <span>99</span>%好评
                                    </em>
                                </p>
                                <p class="j">加入购物车</p>
                            </a>
                        </div>
                    </li>

                    <li>
                        <div class="pro_panelse">
                            <a href="#">
                                <p class="p_img">
                                    <img src="https://res.vmallres.com/pimages//product/6901443331147/428_428_AF39B899DA94231631C86692A2A8E87A05A2430A42872E87mp.png"/>
                                </p>
                                <p title="HUAWEI Mate 30" class="p_name">
                                    HUAWEI Mate 30
                                </p>
                                <p class="p_price">
                                    <b>¥3999</b>
                                    <span>多款可选</span>
                                </p>
                                <p class="p_label">
                                    <span>购机赠券</span>
                                </p>
                                <p class="p_comment">
                                    <em>
                                        <span>19225</span>人评价
                                    </em>
                                    <em>
                                        <span>99</span>%好评
                                    </em>
                                </p>
                                <p class="j">加入购物车</p>
                            </a>
                        </div>
                    </li>                    
 -->
                </ul>

                <ul class="cent_nBXbottom2">
 <!--                    <li>
                        <div class="pro_panelse">
                            <a href="#">
                                <p class="p_img">
                                    <img src="https://res.vmallres.com/pimages//product/6901443361038/428_428_CE4534367D95F8F23202CA910163A1808D15B64744AB42B6mp.png"/>
                                </p>
                                <p title="HUAWEI nova 6" class="p_name">
                                    HUAWEI nova 6
                                </p>
                                <p class="p_price">
                                    <b>¥3799</b>
                                    <span>多款可选</span>
                                </p>
                                <p class="p_label">
                                    <span>购机赠券</span>
                                </p>
                                <p class="p_comment">
                                    <em>
                                        <span>6434</span>人评价
                                    </em>
                                    <em>
                                        <span>99</span>%好评
                                    </em>
                                </p>
                                <p class="j">加入购物车</p>
                            </a>
                        </div>
                    </li>
                   
                    <li>
                        <div class="pro_panelse">
                            <a href="#">
                                <p class="p_img">
                                    <img src="https://res.vmallres.com/pimages//product/6901443363124/428_428_42B09549789695A42D621CF87DC53B5EBE9385772DC61FB9mp.png"/>
                                </p>
                                <p title="HUAWEI nova 6 SE" class="p_name">
                                    HUAWEI nova 6 SE
                                </p>
                                <p class="p_price">
                                    <b>¥2199</b>
                                    <span>多款可选</span>
                                </p>
                                <p class="p_label">
                                    <span>购机赠券</span>
                                </p>
                                <p class="p_comment">
                                    <em>
                                        <span>279</span>人评价
                                    </em>
                                    <em>
                                        <span>99</span>%好评
                                    </em>
                                </p>
                                <p class="j">加入购物车</p>
                            </a>
                        </div>
                    </li>

                    <li>
                        <div class="pro_panelse">
                            <a href="#">
                                <p class="p_img">
                                    <img src="https://res.vmallres.com/pimages//product/6901443316168/428_428_1561435068797mp.png"/>
                                </p>
                                <p title="HUAWEI nova 5 Pro" class="p_name">
                                    HUAWEI nova 5 Pro
                                </p>
                                <p class="p_price">
                                    <b>¥2499</b>
                                    <span>多款可选</span>
                                </p>
                                <p class="p_label">
                                    <span>购机赠券</span>
                                </p>
                                <p class="p_comment">
                                    <em>
                                        <span>34407</span>人评价
                                    </em>
                                    <em>
                                        <span>99</span>%好评
                                    </em>
                                </p>
                                <p class="j">加入购物车</p>
                            </a>
                        </div>
                    </li>

                    <li>
                        <div class="pro_panelse">
                            <a href="#">
                                <p class="p_img">
                                    <img src="https://res.vmallres.com/pimages//product/6901443354986/428_428_EBE4A3E6989BED3C00249E4629090CDB8563D5C6F269F447mp.png"/>
                                </p>
                                <p title="华为畅享10" class="p_name">
                                    华为畅享10
                                </p>
                                <p class="p_price">
                                    <b>¥1399</b>
                                    <span>多款可选</span>
                                </p>
                                <p class="p_label">
                                    <span>购机赠券</span>
                                </p>
                                <p class="p_comment">
                                    <em>
                                        <span>566</span>人评价
                                    </em>
                                    <em>
                                        <span>99</span>%好评
                                    </em>
                                </p>
                                <p class="j">加入购物车</p>
                            </a>
                        </div>
                    </li>

                    <li>
                        <div class="pro_panelse">
                            <a href="#">
                                <p class="p_img">
                                    <img src="https://res.vmallres.com/pimages//product/6901443352685/428_428_8A2025793A107CA11BE7E0A1554665EAD00274E1F37690FDmp.png"/>
                                </p>
                                <p title="华为畅享 10S" class="p_name">
                                    华为畅享 10S
                                </p>
                                <p class="p_price">
                                    <b>¥1599</b>
                                    <span>多款可选</span>
                                </p>
                                <p class="p_label">
                                    <span>购机赠券</span>
                                </p>
                                <p class="p_comment">
                                    <em>
                                        <span>275</span>人评价
                                    </em>
                                    <em>
                                        <span>99</span>%好评
                                    </em>
                                </p>
                                <p class="j">加入购物车</p>
                            </a>        
                        </div>
                    </li>                    
 -->
                </ul>
            </div>
        </div>
    </div>
</body>
<script src="jquery/jquery.min.js"></script>
<script src="js/cookie.js"></script>
<script>
    var dl = document.getElementsByClassName("dl")[0];
    var cUName =  getCookieByName("username");
    //console.log(cUName)
    if(cUName){
       dl.innerHTML = cUName;   
        $("dl").attr('href', '#');
    }
    $.ajaxSettings.async = false;
 	$.getJSON("goods.json",function(res){
        for(var i = 0; i < res.length; i++){
            if(i == 0){
              var arr=res[i];
                var str = "";
                for(var j = 0; j< arr.length;j++){
                str += `
                <li>
                            <div class="pro_panelse">
                                <a href="fdj.html?${arr[j].bid}">
                                    <p class="gBid">${arr[j].bid}</p>
                                    <p class="p_img">
                                        <img src="${arr[j].src}"/>
                                    </p>
                                    <p title="${arr[j].phoneName}" class="p_name">
                                        ${arr[j].phoneName}
                                    </p>
                                    <p class="p_price">
                                        <b>${arr[j].f}${arr[j].price}</b>
                                        <span>${arr[j].duo}</span>
                                    </p>
                                    <p class="p_label">
                                        <span>${arr[j].label}</span>
                                    </p>
                                    <p class="p_comment">
                                        <em>
                                            <span>${arr[j].comment}</span>${arr[j].r}
                                        </em>
                                        <em>
                                            <span>${arr[j].p}</span>${arr[j].h}
                                        </em>
                                    </p>
                                </a>
                                <p class="j">加入购物车</p>        
                            </div>
                        </li>                    
                `
                }
                $(".cent_nBXbottom1").html(str);
            }
            if(i == 1){
                var brr = res[i];
                var sr = "";
                for(var z = 0; z < brr.length; z++){
                    sr += `
                <li>
                            <div class="pro_panelse">
                                <a href="fdj.html?${brr[z].bid}">
                                    <p class="gBid">${brr[z].bid}</p>
                                    <p class="p_img">
                                        <img src="${brr[z].src}"/>
                                    </p>
                                    <p title="${brr[z].phoneName}" class="p_name">
                                        ${brr[z].phoneName}
                                    </p>
                                    <p class="p_price">
                                        <b>${brr[z].f}${brr[z].price}</b>
                                        <span>${brr[z].duo}</span>
                                    </p>
                                    <p class="p_label">
                                        <span>${brr[z].label}</span>
                                    </p>
                                    <p class="p_comment">
                                        <em>
                                            <span>${brr[z].comment}</span>${brr[z].r}
                                        </em>
                                        <em>
                                            <span>${brr[z].p}</span>${brr[z].h}
                                        </em>
                                    </p>
                                </a> 
                                <p class="j">加入购物车</p>       
                            </div>
                        </li>                    
                `
                }
                $(".cent_nBXbottom2").html(sr);
            }
        }
    })

     //添加购物车
    class AddCart{
        constructor(){
            this.add = $(".j");
            this.cartGoodsNum = $(".shulang");
            this.userName = getCookieByName("username");
        }
        init(){
            this.addClick();
            this.computedNum();
        }
        addClick(){
            var _this = this;
            this.add.click(function(){
                //本地存储
                //console.log($(this))
                var gBid = $(this).parent().find(".gBid").html();
                console.log(gBid);
                var data = [{
                    bid:gBid,
                    num:1
                }]
        
                if(localStorage.getItem(_this.userName + "goods")){
                  
                    var cartGoods = JSON.parse(localStorage.getItem(_this.userName+"goods"));
                    console.log(cartGoods);
                    var isBid = false;

                    $.each(cartGoods,function(index,ele){
                       
                        if(ele.bid === gBid){
                            isBid = true;
                            ele.num++;
                            return false;
                        }
                    })
                    if(!isBid){
                        cartGoods.push({
                            bid:gBid,
                            num:1
                        })
                    }
                    //设置当前goods
                    localStorage.setItem(_this.userName+"goods",JSON.stringify(cartGoods));
                }else{
                    localStorage.setItem(_this.userName+"goods",JSON.stringify(data));
                }
                _this.computedNum();
            })
        }
        computedNum(){
            var num = 0;
            if(localStorage.getItem(this.userName+"goods")){
                var cGoods = JSON.parse(localStorage.getItem(this.userName+"goods"));
                $.each(cGoods,function(index,ele){
                    console.log(ele);
                    num = num+parseInt(ele.num);
                });
                this.cartGoodsNum.html(num);
                return num;
            }
        }
    }
  new AddCart().init()

</script>
</html>